<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="一般意义上讲，一个社区也可以被称为群、聚类或模块，是网络中一群阶段或边的集合，其内部的节点间连接较为紧密，而社区间的连接却相对稀疏。那么，社区发现就是在复杂网络中发现这些连接紧密的社区结构。社区发现可以理解为网络中的结点聚类..."/>




  <meta name="keywords" content="算法,python,复杂网络,社区发现," />




  <link rel="alternate" href="/atom.xml" title="Sika">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="http://sikasjc.github.io/2017/12/20/GN/"/>


<meta name="description" content="一般意义上讲，一个社区也可以被称为群、聚类或模块，是网络中一群阶段或边的集合，其内部的节点间连接较为紧密，而社区间的连接却相对稀疏。那么，社区发现就是在复杂网络中发现这些连接紧密的社区结构。社区发现可以理解为网络中的结点聚类...">
<meta name="keywords" content="算法,python,复杂网络,社区发现">
<meta property="og:type" content="article">
<meta property="og:title" content="GN算法--复杂网络中社区发现与Python实现">
<meta property="og:url" content="http://sikasjc.github.io/2017/12/20/GN/index.html">
<meta property="og:site_name" content="Sika">
<meta property="og:description" content="一般意义上讲，一个社区也可以被称为群、聚类或模块，是网络中一群阶段或边的集合，其内部的节点间连接较为紧密，而社区间的连接却相对稀疏。那么，社区发现就是在复杂网络中发现这些连接紧密的社区结构。社区发现可以理解为网络中的结点聚类...">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/26762790.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/23305862.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/48488885.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/79561109.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/21607724.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/17264809.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/24362381.jpg">
<meta property="og:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/55901962.jpg">
<meta property="og:updated_time" content="2018-04-22T03:35:29.566Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GN算法--复杂网络中社区发现与Python实现">
<meta name="twitter:description" content="一般意义上讲，一个社区也可以被称为群、聚类或模块，是网络中一群阶段或边的集合，其内部的节点间连接较为紧密，而社区间的连接却相对稀疏。那么，社区发现就是在复杂网络中发现这些连接紧密的社区结构。社区发现可以理解为网络中的结点聚类...">
<meta name="twitter:image" content="http://ormnbkvfv.bkt.clouddn.com/18-1-21/26762790.jpg">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />







<script>
  var CONFIG = {
    search: ,
    searchPath: "/search.xml",
    fancybox: false,
    toc: true,
  }
</script>




  



    <title> GN算法--复杂网络中社区发现与Python实现 · Sika </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Sika</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Sika</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              关于
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          GN算法--复杂网络中社区发现与Python实现
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017年12月20日
        </span>
      </div>
        
          <div class="post-tags">
            
              <a href="/tags/算法/">算法</a>
            
              <a href="/tags/python/">python</a>
            
              <a href="/tags/复杂网络/">复杂网络</a>
            
              <a href="/tags/社区发现/">社区发现</a>
            
          </div>
        
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text"> 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#复杂网络"><span class="toc-number">1.1.</span> <span class="toc-text"> 复杂网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#社区发现"><span class="toc-number">1.2.</span> <span class="toc-text"> 社区发现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#介数和边介数"><span class="toc-number">1.3.</span> <span class="toc-text"> 介数和边介数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#社区发现的衡量标准模块度函数q"><span class="toc-number">1.4.</span> <span class="toc-text"> 社区发现的衡量标准——模块度函数Q</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基于介数的社区发现的经典算法girvan-newman算法"><span class="toc-number">2.</span> <span class="toc-text"> 基于介数的社区发现的经典算法——Girvan-Newman算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基于边介数的社区发现算法"><span class="toc-number">2.1.</span> <span class="toc-text"> 基于边介数的社区发现算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#girvan-newman算法"><span class="toc-number">2.2.</span> <span class="toc-text"> Girvan-Newman算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python实现"><span class="toc-number">2.3.</span> <span class="toc-text"> Python实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文献"><span class="toc-number">3.</span> <span class="toc-text"> 参考文献</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p><strong>Python代码：<a href="https://github.com/sikasjc/CommunityDetection" target="_blank" rel="noopener">GitHub</a></strong></p>
<hr>
<h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
<h2 id="复杂网络"><a class="markdownIt-Anchor" href="#复杂网络"></a> 复杂网络</h2>
<p>在网络理论的研究中，复杂网络是由数量巨大的节点和节点之间错综复杂的关系共同构成的网络结构。用数学的语言来说，就是一个有着足够复杂的拓扑结构特征的图。复杂网络具有简单网络，如规则网络、随机图等结构所不具备的特性，而这些特性往往出现在真实世界的网络结构中。</p>
<p>在自然界和人类社会中，复杂网络无处不在，如自然界中的生态网络、新陈代谢网络、蛋白质网络等；人类社会中的社交网络、交通网络、电子邮件网络、科学家合作网、电子电路网络等，这些复杂系统都可以用复杂网络的相关特性进行描述和分析，网络中的结点表示系统个体，边表示个体之间的关系。如今，复杂网络的研究是现今科学研究中的一个热点，它已渗透到各个领域，并成为这些领域的重要研究方向。</p>
<h2 id="社区发现"><a class="markdownIt-Anchor" href="#社区发现"></a> 社区发现</h2>
<p>随着复杂网络理论的发展，继1998年Watts和Strogtz提出了WS小世界模型(<a href="https://en.wikipedia.org/wiki/Small-world_network" target="_blank" rel="noopener">Small-world network</a>)，1999年Barabasi和Albert提出无标度网络模型(<a href="https://en.wikipedia.org/wiki/Scale-free_network" target="_blank" rel="noopener">Scale-free network</a>)之后，人们发现复杂网络具有一定的社区结构。相同类型节点之间连接较多，构成一个一个的小社区，不同类型节点之间连接较少，但成为沟通不同社区的重要通道，这种连接的不均匀性表明，网络内部存在一定的自然分化。</p>
<p>对于社区（community），目前没有明确的定义，常见的是Newman和Gievan提出的：社区是图的一个子图，相比于图的其他部分，其中包含着密集的节点，或者等价地说，如果图一个子图内部的链接数量高于这些子图之间的链接数，我们就可以说这个图含有社区。如下图所示，图中网络包含三个社区结构，分别对应图中的三个虚线圈内的节点，同一社区内的节点和节点之间连接很紧密，而社区与社区之间的连接比较稀疏。换而言之，复杂网络的社区结构是复杂网络中社区之间的连接相对稀疏，而社区内部的连接相对稠密的特性。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/26762790.jpg" alt="具有社区结构的网络示意图"></p>
<h2 id="介数和边介数"><a class="markdownIt-Anchor" href="#介数和边介数"></a> 介数和边介数</h2>
<p>一种复杂网络中社区发现的方法是寻找位于社区之间的边，如果能找到并移除这些边，最终将只剩下孤立的社区。</p>
<p>谈及一条位于社区之间的边，由于与多方法可以对其量化，并基于此实现社区发现算法。2004年，Newman和Girvan的论文中提出了利用介数中心性（betweenness centrality）的方法，称之为Girvan-Newman算法，这篇论文也是开创了社区发现这一领域的文章。本文主要针对无权和有权网络，对此类算法进行一定的研究分析。</p>
<p>在图论中，介数中心性（betweenness centrality）是基于最短路径的图的中心的度量方法。对于连通图中的每对顶点，在顶点之间至少存在一条最短路径，而一个节点的介数一般是指通过该节点的最短路径数。</p>
<p>介数中心性的定义为：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>B</mi></msub><mo>(</mo><mi>v</mi><mo>)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>s</mi><mo>≠</mo><mi>v</mi><mo>≠</mo><mi>t</mi><mo>∈</mo><mi>V</mi></mrow></munder><mrow><mfrac><mrow><msub><mi>σ</mi><mrow><mi>s</mi><mi>t</mi><mo>(</mo><mi>v</mi><mo>)</mo></mrow></msub></mrow><mrow><msub><mi>σ</mi><mrow><mi>s</mi><mi>t</mi></mrow></msub></mrow></mfrac></mrow></mrow><annotation encoding="application/x-tex">C_B(v)= \sum_{s\ne v\ne t \in V}{\frac{\sigma_{st(v)}}{\sigma_{st}}} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.17576em;"></span><span class="strut bottom" style="height:2.643465em;vertical-align:-1.467705em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.832795em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">s</span><span class="mrel mtight">≠</span><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span><span class="mrel mtight">≠</span><span class="mord mathit mtight">t</span><span class="mrel mtight">∈</span><span class="mord mathit mtight" style="margin-right:0.22222em;">V</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.467705em;"></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.17576em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">s</span><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width="400em" height="0.2em" viewbox="0 0 400000 200" preserveaspectratio="xMinYMin slice"><path d="M0 80H400000 v40H0z M0 80H400000 v40H0z"/></svg></span></span><span style="top:-3.7452em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">s</span><span class="mord mathit mtight">t</span><span class="mopen mtight">(</span><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p>
<p>其中 <code>$ σ_st (v) $</code> 表示经过节点v的s→t的最短路径数，<code>$ σ_st $</code> 表示s→t的最短路径数。直观上来说，介数中心性反映了节点v作为“桥梁”的重要程度。因此，我们可以定义边介数（edge betweenness）为经过该边的最短路径数，如图1所示，位于社区之间的边的边介数将会很大。同时，可以进一步得到边介数中心性（edge betweenness centrality）。</p>
<h2 id="社区发现的衡量标准模块度函数q"><a class="markdownIt-Anchor" href="#社区发现的衡量标准模块度函数q"></a> 社区发现的衡量标准——模块度函数Q</h2>
<p>Newman和Girvan针对社区发现问题的同时，提出了模块度函数 <code>$Q$</code> 来定量的衡量社区划分的结果。该度量标准自提出以来，逐渐被大多数研究者们接受，并发展了很多以模块度为目标函数的新算法。</p>
<p>模块度，是指复杂网络中连接社区内部节点的边所占的比例，与另一个随机网络中连接社区内部节点的边所占的比例的期望值的差值。其中，这个随机网络的构造方法为：保持每个节点的社区属性不变，根据节点度对节点间的边进行随机连接。如果社区结构比较明显，则社区内部连接的边的比例应改高于随机网络的期望值。</p>
<p>因此，可以用模块度函数 <code>$Q$</code> 定量描述社区划分的模块化水平。假设已经发现复杂网络的社区结构，<code>$M$</code> 为已发现的社区个数，<code>$L$</code> 为网络中的边数，<code>$l_s$</code> 是社区<code>$s$</code> 中节点相互连接的数目，<code>$d_s$</code> 是社区 <code>$s$</code> 中所有节点相互连接数目的和。则 <code>$Q$</code> 的函数表达式如下所示：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>=</mo><munderover><mo>∑</mo><mi>s</mi><mi>M</mi></munderover><mrow><mrow><mo fence="true">[</mo><mfrac><mrow><msub><mi>l</mi><mi>s</mi></msub></mrow><mrow><mi>L</mi></mrow></mfrac><mo>−</mo><mo>(</mo><mfrac><mrow><msub><mi>d</mi><mi>s</mi></msub></mrow><mrow><mn>2</mn><mi>L</mi></mrow></mfrac><msup><mo>)</mo><mn>2</mn></msup><mo fence="true">]</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">Q = \sum_{s}^{M}{\left[\frac{l_s}{L}-(\frac{d_s}{2L})^2 \right]} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8283360000000002em;"></span><span class="strut bottom" style="height:3.078341em;vertical-align:-1.250005em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.8999949999999999em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">s</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.250005em;"></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">L</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width="400em" height="0.2em" viewbox="0 0 400000 200" preserveaspectratio="xMinYMin slice"><path d="M0 80H400000 v40H0z M0 80H400000 v40H0z"/></svg></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathit">L</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width="400em" height="0.2em" viewbox="0 0 400000 200" preserveaspectratio="xMinYMin slice"><path d="M0 80H400000 v40H0z M0 80H400000 v40H0z"/></svg></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></span></p>
<p>上式的物理意义是：网络中连接两个同种类型的节点的边（即社区内部边）比例，减去在同样的社区结构下任意连接这两个节点的边的比例的期望值。如果社区内部边的比例不大于任意连接时的期望值，则有 <code>$Q=0$</code> ， <code>$Q$</code> 的上限为1，而 <code>$Q$</code> 越接近这个值，就说明社区结构越明显，在实际网络中， <code>$Q$</code> 值常位于0.3和0.7之间。</p>
<h1 id="基于介数的社区发现的经典算法girvan-newman算法"><a class="markdownIt-Anchor" href="#基于介数的社区发现的经典算法girvan-newman算法"></a> 基于介数的社区发现的经典算法——Girvan-Newman算法</h1>
<h2 id="基于边介数的社区发现算法"><a class="markdownIt-Anchor" href="#基于边介数的社区发现算法"></a> 基于边介数的社区发现算法</h2>
<p>这样的社区发现算法的主要思路为：计算网络中所有边的边介数，然后寻找边介数值最大的边并移除。在移除时，会改变一些边的边介数。以前经过被移除边的最短路径，现在改为经由其他边，因此必须重新计算边介数，然后再次搜索值最大的边并移除，依此类推。当一条接一条边被移除时，最初连通的网络最终会被分成两部分、三部分等等，直至网络的每一个成为一个社区，是一种<strong>分裂算法</strong>。</p>
<p>算法的执行过程可用树状图表示，如下图所示。算法从顶部开始生成树状图，首先是单个连通网络，然后将其不断划分，直至每个分支只有单个结点为止。在算法运行期间，每个独立的网络结构状态对应于树状图的水平切分，在图2中用红线表示。与红线相交的每个分支代表一组节点，即一个社区，沿分支向下到底部的全部节点都为其成员。因此对于一个连通网络，树状图能够得到算法执行全过程中每个阶段里网络划分的社区结构。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/23305862.jpg" alt="分裂算法"></p>
<p>这样我们可以发现，这种算法并不是给出将网络划分成社区的唯一划分，而是给出多种不同程度的划分。范围比较粗的划分，将网络划分为几个大的社区，范围比较细的划分，将网络划分为许多比较小的社区。这种不同程度的划分，可以揭示关于层次网络结构的信息。同时，用户可根据目标社区数来决定进行哪些划分，或者利用模块度函数 <code>$Q$</code> 给出该算法的最优划分。</p>
<h2 id="girvan-newman算法"><a class="markdownIt-Anchor" href="#girvan-newman算法"></a> Girvan-Newman算法</h2>
<p>如前所述，直观来看，在社区内部节点之间相互连接的边密度较大，因此，通过边介数（连接社区的边的边介数大）来识别社区是一种较为直观的社区发现算法。Girvan-Newman算法即是一种基于介数的社区发现算法，其基本思想是根据边介数中心性（edge betweenness）从大到小的顺序不断的将边从网络中移除直到整个网络分解为各个社区。因此，Girvan-Newman算法实际上是一种分裂方法。</p>
<pre><code>Girvan-Newman算法的基本流程如下：
（1）计算网络中所有边的边介数；
（2）找到边介数最高的边并将它从网络中移除；
（3）重复步骤2，直到每个节点成为一个独立的社区为止，即网络中没有边存在。
</code></pre>
<p>Girvan-Newman算法给出了如何除去边得到社区结构。但在得到最终的社区数之前，还有一个问题没有得到解决，即如何确定合适的社区数，使社区划分结果最优。这时需要用到之前提到的衡量标准——模块度函数 <code>$Q$</code> 。</p>
<p>这样可以利用 <code>$Q$</code> 值寻找合适的社区数，Girvan-Newman算法中每去除一次边，则计算一下所得社区结构的 <code>$Q$</code> 值，寻找到 <code>$Q$</code> 值最大时的社区数量。如下图所示，当边去除后，社区数量为4时，所得 <code>$Q$</code> 值最大，因此该网络划分为4个社区最优。<br>
<img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/48488885.jpg" alt="Girvan-Newman算法演示"></p>
<h2 id="python实现"><a class="markdownIt-Anchor" href="#python实现"></a> Python实现</h2>
<p><strong>Python代码：<a href="https://github.com/sikasjc/CommunityDetection" target="_blank" rel="noopener">GitHub</a></strong></p>
<p><strong>Zachary’s karate club网络</strong></p>
<p>Zachary网络是一个检验不同社区发现算法的经典真实的无权网络，一共有34个节点，78条边。该网络是Zachary在上世纪70年代，用了两年时间观察研究空手道俱乐部34个成员之间的个关系而得到的，如下图所示。在调查过程中，俱乐部的主管和校长产生争执，分裂成了两个团体，真实的社区如下所示：</p>
<pre><code>[[1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 17, 18, 20, 22], 
[32, 33, 34, 9, 10, 15, 16, 19, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31]]
</code></pre>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/79561109.jpg" alt="Zachary's karate club"></p>
<p>这里使用Python的NetworkX包以及Matplotlib包来完成对于Girvan-Newman算法的演示，以及Gephi，一个基于JVM的可视化平台。</p>
<p>NetworkX是一个用于创建，操作和研究复杂网络的结构、动态和功能的Python包。Matplotlib是一个Python 2D绘图库，利用它完成模块化函数Q与划分社区数目的关系曲线，之后使用Gephi作为网络的可视化工具，将GML文件中的图中划分的社区表示出来。</p>
<pre><code>Python环境需求：
1. Python-3.6.3
2. NetworkX-2.0
3. Matplotlib-2.1.0
</code></pre>
<p>安装好Python环境需求后，<a href="http://xn--Girvan-Newman-vd8vz73owtwdvv1cqj2a.py" target="_blank" rel="noopener">可直接运行Girvan-Newman.py</a>，输出格式为GML的文件，以及其他信息。获得基于Girvan-Newman算法的社区发现的一些特性。Zachary’s karate club网络Girvan-Newman算法划分社区数与Q值的关系（如下图所示）。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/21607724.jpg" alt="划分社区数与Q值"></p>
<p>我们可以看到，当我们已知应该划分社区的个数，即2个社区时，Girvan-Newman算法的模块度函数Q值到达极大值，为0.35996055226824464，将输出的GML文件用Gephi打开。这时的社区划分结果如下所示，除了节点3以外,其它节点都被正确归类，如下图所示。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/17264809.jpg" alt="划分结果"></p>
<pre><code>-----------Using number to divide communities and the Q-----------
The number of Communites: 2
Communites: [[1, 2, 4, 5, 6, 7, 8, 11, 12, 13, 14, 17, 18, 20, 22], [32, 33, 34, 3, 9, 10, 15, 16, 19, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31]]
Max_Q: 0.35996055226824464
-------------------------------------------------------------------
</code></pre>
<p>但是对于不知道应该划分社区个数时，依赖模块度函数Q的最大值划分社区，从图3中可知，当划分成5个社区时，模块度函数Q达到最大值，为0.40129848783694944，这时的社区划分结果较实际网络相差略大。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/24362381.jpg" alt="Q的最大值划分社区数量"></p>
<pre><code>-----------the Max Q and divided communities-----------------------
The number of Communites 5
Communites: [[1, 2, 4, 8, 12, 13, 14, 18, 20, 22], [32, 3, 25, 26, 28, 29], [5, 6, 7, 11, 17], [33, 34, 9, 15, 16, 19, 21, 23, 24, 27, 30, 31], [10]]
Max_Q: 0.40129848783694944
-------------------------------------------------------------------
</code></pre>
<p>下图为Newman和Girvan在论文Finding and evaluating community structure in networks中给出计算结果，和之前给出的图以及计算出的划分社区的每一个步骤对比发现，我们实现的Girvan-Newman算法与论文中给出的结果相一致。</p>
<p><img src="http://ormnbkvfv.bkt.clouddn.com/18-1-21/55901962.jpg" alt="论文中给出的划分结果"></p>
<h1 id="参考文献"><a class="markdownIt-Anchor" href="#参考文献"></a> 参考文献</h1>
<p>1、Newman M E J, Girvan M. Finding and evaluating community structure in networks[J]. Physical review E, 2004, 69(2): 026113.<br>
2、杨晓光. 基于复杂网络的社区发现算法研究与实现[D].南京理工大学,2017.<br>
3、汪洋. 复杂网络的社团发现算法研究[D].安徽大学,2014.<br>
4、莫春玲. 复杂网络中聚类方法及社团结构的研究[D].武汉理工大学,2007.</p>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>Sikasjc</span>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://sikasjc.github.io/2017/12/20/GN/">http://sikasjc.github.io/2017/12/20/GN/</a>
    </p>
    <p class="copyright-item lincese">
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/算法/">算法</a>
            
              <a href="/tags/python/">python</a>
            
              <a href="/tags/复杂网络/">复杂网络</a>
            
              <a href="/tags/社区发现/">社区发现</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/03/20/pagemonitor/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Page Monitor 静态网页内容监测</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2017/11/10/Application_layer/">
        <span class="next-text nav-default">计算机网络的基础知识：应用层</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzQzMy85OTg5">
        <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
      </div>  
    
  </div>

        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:sikasjc@163.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/sikasjc" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="http://weibo.com/u/5605720030" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a href="https://www.zhihu.com/people/si-qia-sika" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Sikasjc</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  
   <script type="text/javascript">
	(function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
  </script>




    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  </body>
</html>
