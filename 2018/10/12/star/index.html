<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Python中的星号，`**`和`*`运算符"/>




  <meta name="keywords" content="python," />




  <link rel="alternate" href="/atom.xml" title="Sika">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="http://sikasjc.github.io/2018/10/12/star/"/>


<meta name="description" content="在Python中，我们经常可以见到**和*运算符，比如*args 和 **kwargs，还有n**3、*nums等等。这里总结一下，在Python中 **和*的用法。">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="Python中的星号，`**`和`*`运算符">
<meta property="og:url" content="http://sikasjc.github.io/2018/10/12/star/index.html">
<meta property="og:site_name" content="Sika">
<meta property="og:description" content="在Python中，我们经常可以见到**和*运算符，比如*args 和 **kwargs，还有n**3、*nums等等。这里总结一下，在Python中 **和*的用法。">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2018-10-12T14:48:59.832Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python中的星号，`**`和`*`运算符">
<meta name="twitter:description" content="在Python中，我们经常可以见到**和*运算符，比如*args 和 **kwargs，还有n**3、*nums等等。这里总结一下，在Python中 **和*的用法。">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />







<script>
  var CONFIG = {
    search: ,
    searchPath: "/search.xml",
    fancybox: false,
    toc: true,
  }
</script>




  



    <title> Python中的星号，`**`和`*`运算符 · Sika </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Sika</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Sika</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              关于
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Python中的星号，`**`和`*`运算符
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018年10月12日
        </span>
      </div>
        
          <div class="post-tags">
            
              <a href="/tags/python/">python</a>
            
          </div>
        
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数学运算符"><span class="toc-number">1.</span> <span class="toc-text"> 数学运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数参数"><span class="toc-number">2.</span> <span class="toc-text"> 函数参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解包参数列表"><span class="toc-number">3.</span> <span class="toc-text"> 解包参数列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#序列解包"><span class="toc-number">4.</span> <span class="toc-text"> 序列解包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#keyword-only-arguments"><span class="toc-number">5.</span> <span class="toc-text"> Keyword-Only Arguments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reference"><span class="toc-number">6.</span> <span class="toc-text"> Reference</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>在Python中，我们经常可以见到<code>**</code>和<code>*</code>运算符，比如<code>*args</code> 和 <code>**kwargs</code>，还有<code>n**3</code>、<code>*nums</code>等等。这里总结一下，在Python中 <code>**</code>和<code>*</code>的用法。</p>
<a id="more"></a>
<h2 id="数学运算符"><a class="markdownIt-Anchor" href="#数学运算符"></a> 数学运算符</h2>
<p>它们作为数学运算符是非常简单的：</p>
<ul>
<li><code>*</code>用于乘法</li>
<li><code>**</code>用于乘方</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> * <span class="number">6</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> ** <span class="number">6</span></span><br><span class="line"><span class="number">64</span></span><br></pre></td></tr></table></figure>
<h2 id="函数参数"><a class="markdownIt-Anchor" href="#函数参数"></a> 函数参数</h2>
<p><code>*args</code> 和 <code>**kwargs</code> 主要用于函数定义，是一种允许任意数量（即预先并不知道函数使用者会传递多少个参数给）的函数参数的习惯用法，可以参见<a href="https://docs.python.org/dev/tutorial/controlflow.html#more-on-defining-functions" target="_blank" rel="noopener">Python的官方文档</a>。</p>
<p>首先并不是必须写成<code>*args</code> 和<code>**kwargs</code>。 只有变量前面的 <code>*</code>(星号)才是必须的，也可以写成<code>*var</code>和<code>**vars</code>。 而写成<code>*args</code> 和<code>**kwargs</code>只是一个通俗的命名约定。</p>
<p><strong><code>*args</code></strong></p>
<p><code>*args</code>是可变参数。<code>*args</code> 可以表示任意多个参数，它本质是一个 tuple。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(*args)</span>:</span></span><br><span class="line">   ...:     <span class="keyword">for</span> a <span class="keyword">in</span> args:</span><br><span class="line">   ...:         <span class="keyword">print</span> a</span><br><span class="line">   ...:         </span><br><span class="line">   ...:         </span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: foo(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>** <code>**kwargs</code>**</p>
<p><code>**kwargs</code>是关键字参数，它本质上是一个 dict。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">5</span>]: <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line">   ...:     <span class="keyword">for</span> a <span class="keyword">in</span> kwargs:</span><br><span class="line">   ...:         <span class="keyword">print</span> a, kwargs[a]</span><br><span class="line">   ...:         </span><br><span class="line">   ...:         </span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: bar(name=<span class="string">'one'</span>, age=<span class="number">27</span>)</span><br><span class="line">age <span class="number">27</span></span><br><span class="line">name one</span><br></pre></td></tr></table></figure>
<p><code>*args</code> 和 <code>**kwargs</code>都可以与普通参数混合，以允许向函数传递一组固定参数和一些可变的参数：</p>
<p>在Python中定义函数，可以用必选参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数都可以组合使用。但是请注意，参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。</p>
<p>因此，如果同时使用 <code>*args</code> 和 <code>**kwargs</code> 时，<code>*args</code> 参数必须要在 <code>**kwargs</code> 之前。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(kind, *args, **kwargs)</span>:</span></span><br><span class="line">   <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="解包参数列表"><a class="markdownIt-Anchor" href="#解包参数列表"></a> 解包参数列表</h2>
<p>在Python中，调用函数时，利用<code>*</code>语句可以将参数列表解包，如下所示，<code>foo</code>有两个参数，我们可以传入一个参数列表<code>l</code>，然后利用<code>*</code>运算符，解包参数列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">9</span>]: <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(bar, lee)</span>:</span></span><br><span class="line">   ...:     <span class="keyword">print</span> bar, lee</span><br><span class="line">   ...:     </span><br><span class="line">   ...:     </span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: l = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: foo(*l)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h2 id="序列解包"><a class="markdownIt-Anchor" href="#序列解包"></a> 序列解包</h2>
<p>在Python3.0之后，Python提供了一种非常方便的办法解压可迭代对象赋值给多个变量 (<a href="http://www.python.org/dev/peps/pep-3132/" target="_blank" rel="noopener">Extended Iterable Unpacking</a>)。</p>
<p>另外一种情况，假设你现在有一些用户的记录列表，每条记录包含一个名字、邮件，接着就是不确定数量的电话号码。 你可以像下面这样分解这些记录：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>record = (<span class="string">'Dave'</span>, <span class="string">'dave@example.com'</span>, <span class="string">'773-555-1212'</span>, <span class="string">'847-555-1212'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name, email, *phone_numbers = record</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name</span><br><span class="line"><span class="string">'Dave'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>email</span><br><span class="line"><span class="string">'dave@example.com'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>phone_numbers</span><br><span class="line">[<span class="string">'773-555-1212'</span>, <span class="string">'847-555-1212'</span>]</span><br></pre></td></tr></table></figure>
<p>值得注意的是上面解压出的 <code>phone_numbers</code> 变量永远都是列表类型，不管解压的电话号码数量是多少（包括 0 个）。 所以，任何使用到 <code>phone_numbers</code> 变量的代码就不需要做多余的类型检查去确认它是否是列表类型了。</p>
<p>星号表达式也能用在列表的开始部分。比如，你有一个公司前 8 个月销售数据的序列， 但是你想看下最近一个月数据和前面 7 个月的平均值的对比。你可以这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*trailing_qtrs, current_qtr = sales_record</span><br><span class="line">trailing_avg = sum(trailing_qtrs) / len(trailing_qtrs)</span><br><span class="line"><span class="keyword">return</span> avg_comparison(trailing_avg, current_qtr)</span><br></pre></td></tr></table></figure>
<p>下面是在 Python 解释器中执行的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>*trailing, current = [<span class="number">10</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>trailing</span><br><span class="line">[<span class="number">10</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">10</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>current</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<h2 id="keyword-only-arguments"><a class="markdownIt-Anchor" href="#keyword-only-arguments"></a> Keyword-Only Arguments</h2>
<p>在Python3中，也加入了一个新的语法（参见  <a href="https://www.python.org/dev/peps/pep-3102/" target="_blank" rel="noopener">PEP 3102</a>）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(arg1, arg2, arg3, *, kwarg1, kwarg2)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>这个函数只接受3个位置参数，<code>*</code>之后的所有内容只能作为关键字参数传递(只能由关键字提供的参数，并且永远不会被位置参数自动填充)。</p>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h2>
<ul>
<li>
<p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431752945034eb82ac80a3e64b9bb4929b16eeed1eb9000" target="_blank" rel="noopener">函数的参数</a> —— 廖雪峰的官方网站-Python教程</p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/36901/what-does-double-star-asterisk-and-star-asterisk-do-for-parameters" target="_blank" rel="noopener">What does ** (double star/asterisk) and * (star/asterisk) do for parameters?</a> —— Stackoverflow</p>
</li>
<li>
<p><a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c01/p02_unpack_elements_from_iterables.html" target="_blank" rel="noopener">1.2 解压可迭代对象赋值给多个变量</a> —— Python Cookbook</p>
</li>
</ul>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>Sikasjc</span>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://sikasjc.github.io/2018/10/12/star/">http://sikasjc.github.io/2018/10/12/star/</a>
    </p>
    <p class="copyright-item lincese">
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/python/">python</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/10/24/curvefitting/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">多项式曲线拟合和最小二乘法</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2018/10/02/bithacks1/">
        <span class="next-text nav-default">位计算技巧(一)</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="vcomments"></div>
    
  </div>

        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:sikasjc@163.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/sikasjc" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Sikasjc</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
    
<!-- valine Comments -->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript">
var valine = new Valine();
    valine.init({
        el: '#vcomments',
        notify: false,
        verify: false,
        app_id: "x8lD1gvsE8QmIPccHVLe6RmR-gzGzoHsz",
        app_key: "Fgn21BcUswUD2zT3xMg4bRmX",
        placeholder: "欢迎~",
        avatar: 'hide',
        meta: ['nick', 'mail']
    });
</script>

  


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  </body>
</html>
